
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>IELTS Journey — LizOn Education</title>
  <meta name="theme-color" content="#062b1f"/>

  <style>
    :root{
      /* Dark Green brand (no pure black) */
      --bg:#041f16;
      --bg2:#062b1f;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.12);
      --stroke2: rgba(255,255,255,.20);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --gold: #d6b35a;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
      --radius2: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1000px 700px at 20% 0%, rgba(35,140,110,.18), transparent 55%),
        radial-gradient(900px 700px at 80% 30%, rgba(255,190,100,.08), transparent 55%),
        var(--bg);
      overflow: hidden; /* ✅ NO PAGE SCROLL */
    }

    /* ====== ONE SCREEN LAYOUT ====== */
    .screen{
      height: 100svh;
      height: 100dvh;
      padding: calc(env(safe-area-inset-top) + 10px) 12px calc(env(safe-area-inset-bottom) + 12px);
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 10px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 10px 12px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      border-radius: var(--radius2);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      min-width:0;
    }
    .logo{
      width:42px; height:42px;
      border-radius: 16px;
      background: rgba(255,255,255,.06);
      border: 1px solid var(--stroke);
      display:grid; place-items:center;
      font-weight: 950;
      letter-spacing: .3px;
      color: var(--gold);
      flex: 0 0 auto;
    }
    .brandText{
      min-width:0;
      line-height:1.15;
    }
    .brandText b{
      display:block;
      font-size: 15px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brandText span{
      display:block;
      font-size: 12px;
      color: var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .topActions{ display:flex; gap:8px; align-items:center; }
    .iconBtn{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      color: var(--text);
      border-radius: 14px;
      height: 40px;
      padding: 0 12px;
      font-weight: 950;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .iconBtn:active{ transform: translateY(1px); }

    /* ====== 5 ITEMS IN ONE SCREEN (header already above) ====== */
    .cards{
      display:grid;
      grid-template-rows: repeat(4, 1fr);
      gap: 10px;
      min-height: 0;
    }

    .courseCard{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      border-radius: var(--radius2);
      overflow:hidden;
      box-shadow: var(--shadow);
      position: relative;
      display:grid;
      grid-template-rows: 1fr auto;
      min-height: 0;
    }

    /* The “image” (tap to open video) */
    .courseMedia{
      position: relative;
      min-height: 0;
      border-bottom: 1px solid var(--stroke);
      background:
        linear-gradient(180deg, rgba(0,0,0,.00), rgba(0,0,0,.28)),
        var(--panel);
      display:flex;
      align-items:stretch;
      justify-content:stretch;
    }
    .courseMediaBtn{
      width: 100%;
      border: none;
      background: transparent;
      color: inherit;
      padding: 0;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      display:block;
      position:relative;
      overflow:hidden;
    }
    .courseMediaBtn:active{ transform: none; }

    .courseImg{
      position:absolute; inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      filter: saturate(1.05) contrast(1.02);
      opacity: .95;
    }

    .courseOverlay{
      position:absolute; inset:0;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      padding: 10px 10px;
      gap:10px;
      background: linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.55));
    }
    .courseTitle{
      font-weight: 950;
      font-size: 14px;
      line-height:1.1;
    }
    .courseSub{
      font-size: 12px;
      color: rgba(255,255,255,.78);
      margin-top: 2px;
      line-height:1.1;
    }
    .playPill{
      display:flex;
      align-items:center;
      gap:8px;
      padding: 9px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.08);
      backdrop-filter: blur(8px);
      font-weight: 950;
      font-size: 12px;
      white-space:nowrap;
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      background: rgba(255,190,100,.95);
      box-shadow: 0 0 0 5px rgba(255,190,100,.10);
    }

    /* Buttons under image: Admit | Details | Routine */
    .courseActions{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 8px;
      padding: 10px;
      background: rgba(255,255,255,.02);
    }
    .miniBtn{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      color: var(--text);
      border-radius: 14px;
      height: 42px;
      font-weight: 950;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      user-select:none;
    }
    .miniBtn.primary{
      border-color: rgba(214,179,90,.35);
      background: rgba(214,179,90,.12);
    }
    .miniBtn:active{ transform: translateY(1px); }

    /* ====== SHEETS / MODALS ====== */
    .backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      z-index: 9998;
    }
    .backdrop.show{ display:block; }

    .sheet{
      position:fixed;
      left: 10px;
      right: 10px;
      bottom: calc(env(safe-area-inset-bottom) + 10px);
      max-height: 78vh;
      border-radius: 22px;
      border: 1px solid var(--stroke);
      background: rgba(6,43,31,.92);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      display:none;
      z-index: 9999;
      overflow:hidden;
      transform: translateY(10px);
    }
    .sheet.show{
      display:block;
      animation: up .14s ease-out forwards;
    }
    @keyframes up{ from{ opacity:0; transform: translateY(18px);} to{ opacity:1; transform: translateY(0);} }

    .sheetHead{
      padding: 12px 12px 10px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .sheetHead h3{
      margin:0;
      font-size: 15px;
      line-height:1.2;
    }
    .sheetHead p{
      margin:6px 0 0;
      color: var(--muted);
      font-size: 12px;
      line-height:1.35;
    }
    .closeBtn{
      width: 42px;
      height: 42px;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      color: var(--text);
      cursor:pointer;
      font-weight: 950;
      display:grid;
      place-items:center;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      flex: 0 0 auto;
    }

    .sheetBody{
      padding: 12px;
      max-height: calc(78vh - 64px);
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* Video area */
    .videoWrap{
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      overflow:hidden;
      background: rgba(0,0,0,.20);
    }
    .videoWrap iframe{
      width: 100%;
      height: min(56vw, 320px);
      border: 0;
      display:block;
    }

    /* Details selector (tap-only) */
    .seg{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin: 0 0 10px;
    }
    .seg button{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      color: var(--text);
      border-radius: 999px;
      height: 38px;
      padding: 0 12px;
      cursor:pointer;
      font-weight: 950;
      font-size: 12px;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      white-space:nowrap;
    }
    .seg button.active{
      border-color: rgba(214,179,90,.35);
      background: rgba(214,179,90,.12);
    }
    .detailBox{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      border-radius: 18px;
      padding: 12px;
      color: var(--text);
      line-height:1.55;
      font-size: 13px;
    }
    .detailBox b{ color: rgba(255,255,255,.95); }

    /* Pricing cards in pricing sheet */
    .priceGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .priceCard{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      border-radius: 18px;
      padding: 12px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:flex-start;
    }
    .priceCard b{ display:block; font-size: 13px; }
    .priceCard span{ display:block; font-size: 12px; color: var(--muted); margin-top:3px; }
    .price{
      font-weight: 950;
      font-size: 15px;
      white-space:nowrap;
    }
    .best{
      border-color: rgba(214,179,90,.30);
      background: linear-gradient(180deg, rgba(214,179,90,.12), rgba(255,255,255,.02));
    }

    .payRow{
      margin-top: 10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .payRow a{
      text-decoration:none;
    }

    /* Tiny helper so 4 cards fit comfortably */
    @media (max-height: 780px){
      .courseActions{ padding: 8px; gap: 6px; }
      .miniBtn{ height: 40px; border-radius: 13px; font-size: 12px; }
      .courseOverlay{ padding: 9px; }
      .courseTitle{ font-size: 13px; }
      .courseSub{ font-size: 11px; }
    }
  </style>
</head>

<body>

  <main class="screen" aria-label="IELTS Journey one-screen">
    <!-- Header (the 1st item) -->
    <section class="topbar">
      <div class="brand">
        <div class="logo">LZ</div>
        <div class="brandText">
          <b>LizOn Education</b>
          <span>IELTS Journey — ZERO → HOPE → STEP-UP → DESPERATE</span>
        </div>
      </div>
      <div class="topActions">
        <button class="iconBtn" id="openPricingTop" type="button">Pricing</button>
      </div>
    </section>

    <!-- 4 course images (items 2-5) -->
    <section class="cards" aria-label="Course cards">
      <!-- ZERO -->
      <article class="courseCard" data-course="zero">
        <div class="courseMedia">
          <button class="courseMediaBtn" type="button"
                  data-open-video
                  data-title="IELTS ZERO — Video"
                  data-video="https://www.youtube.com/embed/dQw4w9WgXcQ">
            <img class="courseImg" alt="IELTS ZERO image" src="assets/zero-card.jpg">
            <div class="courseOverlay">
              <div>
                <div class="courseTitle">IELTS ZERO</div>
                <div class="courseSub">Foundation • Grammar • Basic Spoken • Pronunciation</div>
              </div>
              <div class="playPill"><span class="dot"></span> Tap to Play</div>
            </div>
          </button>
        </div>
        <div class="courseActions">
          <button class="miniBtn primary" type="button" data-admit>Admit</button>
          <button class="miniBtn" type="button" data-details>Details</button>
          <button class="miniBtn" type="button" data-routine>Routine</button>
        </div>
      </article>

      <!-- HOPE -->
      <article class="courseCard" data-course="hope">
        <div class="courseMedia">
          <button class="courseMediaBtn" type="button"
                  data-open-video
                  data-title="IELTS HOPE — Video"
                  data-video="https://www.youtube.com/embed/dQw4w9WgXcQ">
            <img class="courseImg" alt="IELTS HOPE image" src="assets/hope-card.jpg">
            <div class="courseOverlay">
              <div>
                <div class="courseTitle">IELTS HOPE</div>
                <div class="courseSub">Reading speed • Listening power • Free-hand writing • Speaking opinions</div>
              </div>
              <div class="playPill"><span class="dot"></span> Tap to Play</div>
            </div>
          </button>
        </div>
        <div class="courseActions">
          <button class="miniBtn primary" type="button" data-admit>Admit</button>
          <button class="miniBtn" type="button" data-details>Details</button>
          <button class="miniBtn" type="button" data-routine>Routine</button>
        </div>
      </article>

      <!-- STEP-UP -->
      <article class="courseCard" data-course="stepup">
        <div class="courseMedia">
          <button class="courseMediaBtn" type="button"
                  data-open-video
                  data-title="IELTS STEP-UP — Video"
                  data-video="https://www.youtube.com/embed/dQw4w9WgXcQ">
            <img class="courseImg" alt="IELTS STEP-UP image" src="assets/stepup-card.jpg">
            <div class="courseOverlay">
              <div>
                <div class="courseTitle">IELTS STEP-UP</div>
                <div class="courseSub">Core question types • Writing structure • 100 sec speaking control</div>
              </div>
              <div class="playPill"><span class="dot"></span> Tap to Play</div>
            </div>
          </button>
        </div>
        <div class="courseActions">
          <button class="miniBtn primary" type="button" data-admit>Admit</button>
          <button class="miniBtn" type="button" data-details>Details</button>
          <button class="miniBtn" type="button" data-routine>Routine</button>
        </div>
      </article>

      <!-- DESPERATE -->
      <article class="courseCard" data-course="desperate">
        <div class="courseMedia">
          <button class="courseMediaBtn" type="button"
                  data-open-video
                  data-title="IELTS DESPERATE — Video"
                  data-video="https://www.youtube.com/embed/dQw4w9WgXcQ">
            <img class="courseImg" alt="IELTS DESPERATE image" src="assets/desperate-card.jpg">
            <div class="courseOverlay">
              <div>
                <div class="courseTitle">IELTS DESPERATE</div>
                <div class="courseSub">All modules • Test-practice-evaluate loop • Near-exam correction</div>
              </div>
              <div class="playPill"><span class="dot"></span> Tap to Play</div>
            </div>
          </button>
        </div>
        <div class="courseActions">
          <button class="miniBtn primary" type="button" data-admit>Admit</button>
          <button class="miniBtn" type="button" data-details>Details</button>
          <button class="miniBtn" type="button" data-routine>Routine</button>
        </div>
      </article>
    </section>
  </main>

  <!-- BACKDROP -->
  <div class="backdrop" id="backdrop"></div>

  <!-- VIDEO SHEET -->
  <section class="sheet" id="videoSheet" aria-hidden="true">
    <div class="sheetHead">
      <div>
        <h3 id="videoTitle">Video</h3>
        <p>Tap outside or close to return exactly where you left.</p>
      </div>
      <button class="closeBtn" type="button" data-close>✕</button>
    </div>
    <div class="sheetBody">
      <div class="videoWrap">
        <iframe id="videoFrame" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <!-- DETAILS SHEET (tap-only options, content shows inside same sheet) -->
  <section class="sheet" id="detailsSheet" aria-hidden="true">
    <div class="sheetHead">
      <div>
        <h3 id="detailsTitle">Details</h3>
        <p>Tap an option → see info → close and you’re back.</p>
      </div>
      <button class="closeBtn" type="button" data-close>✕</button>
    </div>

    <div class="sheetBody">
      <div class="seg" id="detailsTabs"></div>
      <div class="detailBox" id="detailsContent">Select an option.</div>
    </div>
  </section>

  <!-- ROUTINE SHEET (same for all, you can plug your existing routine markup here) -->
  <section class="sheet" id="routineSheet" aria-hidden="true">
    <div class="sheetHead">
      <div>
        <h3>Routine</h3>
        <p>Same routine view for all courses (highlight if you want).</p>
      </div>
      <button class="closeBtn" type="button" data-close>✕</button>
    </div>

    <div class="sheetBody">
      <div class="detailBox">
        <b>Routine Placeholder:</b><br/>
        You can paste your current working routine UI here (the one you already said works).<br/><br/>
        If you want highlight per course, I can wire it the same way you did earlier.
      </div>
    </div>
  </section>

  <!-- PRICING / PAYMENT SHEET (Admit goes here) -->
  <section class="sheet" id="pricingSheet" aria-hidden="true">
    <div class="sheetHead">
      <div>
        <h3>Pricing + Combos</h3>
        <p>Admit button brings you here. Then WhatsApp / payment steps.</p>
      </div>
      <button class="closeBtn" type="button" data-close>✕</button>
    </div>

    <div class="sheetBody">
      <div class="priceGrid">
        <div class="priceCard"><div><b>IELTS ZERO</b><span>Foundation</span></div><div class="price">4,200</div></div>
        <div class="priceCard"><div><b>IELTS HOPE</b><span>Skill reset</span></div><div class="price">5,500</div></div>
        <div class="priceCard"><div><b>IELTS STEP-UP</b><span>Band-6 barrier</span></div><div class="price">6,200</div></div>
        <div class="priceCard"><div><b>IELTS DESPERATE</b><span>Near-exam evaluation</span></div><div class="price">7,500</div></div>

        <div class="priceCard best">
          <div>
            <b>N2F (All 4) — Best Value</b>
            <span>ZERO + HOPE + STEP-UP + DESPERATE</span>
          </div>
          <div class="price">12,700</div>
        </div>

        <div class="priceCard"><div><b>ZERO + HOPE</b><span>Combo</span></div><div class="price">6,790</div></div>
        <div class="priceCard"><div><b>HOPE + STEP-UP</b><span>Combo</span></div><div class="price">8,190</div></div>
        <div class="priceCard"><div><b>STEP-UP + DESPERATE</b><span>Combo</span></div><div class="price">9,590</div></div>
        <div class="priceCard"><div><b>ZERO + HOPE + STEP-UP</b><span>Combo</span></div><div class="price">9,540</div></div>
        <div class="priceCard"><div><b>HOPE + STEP-UP + DESPERATE</b><span>Combo</span></div><div class="price">11,520</div></div>
      </div>

      <div class="payRow">
        <a class="miniBtn primary" href="https://wa.me/8801611611139?text=Assalamu%20Alaikum%2C%20IELTS%20admission%20nite%20chai.%20Payment%20procedure%20diben%3F" target="_blank" rel="noopener">Talk with LizOn</a>
        <a class="miniBtn" href="https://wa.me/8801611611139?text=Assalamu%20Alaikum%2C%20combo%20niye%20guide%20korben%3F" target="_blank" rel="noopener">Need help choosing</a>
      </div>

      <div style="margin-top:12px" class="detailBox">
        <b>Payment Segment Placeholder</b><br/>
        You can embed your payment instruction UI here (Bkash/Rocket/Nagad/Card + Txn ID + Screenshot Upload + Name/Email/Phone).
      </div>
    </div>
  </section>

  <script>
    // ===== DATA (details content per course) =====
    // You can paste the exact course text you already locked earlier.
    const COURSE_DETAILS = {
      zero: {
        title: "IELTS ZERO — Details",
        tabs: [
          ["Skills Covered", `• Grammar<br/>• Basic Spoken<br/>• Pronunciation`],
          ["Benefited Modules", `• Speaking<br/>• Writing`],
          ["Aim", `Help you learn basic English clearly—grammar, sentence making, pronunciation—so English feels easier and less scary.`],
          ["After ZERO", `• You understand basic grammar<br/>• You can make correct sentences<br/>• You can speak simple English<br/>• You feel ready to start IELTS`],
          ["Who should take", `• Beginners in English<br/>• Weak in grammar or speaking<br/>• IELTS starters who feel confused<br/>• Anyone who wants a clean-start`],
          ["Course comes with", `• Live Classes by Band 8+ Instructors<br/>• Mentorship by SHUVO SARKER JOY<br/>• Private Discord Channel<br/>• Scholarship Process<br/>• Get points for abroad job opportunity`],
        ]
      },
      hope: {
        title: "IELTS HOPE — Details",
        tabs: [
          ["Skills Covered", `• Reading Speed<br/>• Listening Power<br/>• Free Hand Writing<br/>• Speaking (Opinion)`],
          ["Benefited Modules", `• Reading<br/>• Listening<br/>• Speaking<br/>• Writing`],
          ["Aim", `HOPE helps you fix the skills that block your IELTS score.`],
          ["After HOPE", `• Read without translating<br/>• Catch answers confidently in listening<br/>• Write freely with your own ideas<br/>• Speak confidently with your own opinion<br/>• Feel ready, not confused`],
          ["Who should take", `• IELTS feels difficult even after practice<br/>• Reading is slow<br/>• Listening accents confuse you<br/>• Can't write structured Writing`],
          ["Course comes with", `• Live Classes by Band 8+ Instructors<br/>• Mentorship by SHUVO SARKER JOY<br/>• Private Discord Channel<br/>• Scholarship Plan (Personalized)<br/>• Abroad Job Process`],
        ]
      },
      stepup: {
        title: "IELTS STEP-UP — Details",
        tabs: [
          ["Skills Covered", `Listening: Part 1 → Part 4<br/>Reading: T/F/NG + all gap types<br/>Writing: Task 1 overall + comparison<br/>Task 2: idea + body segmentation + topic sentence<br/>Speaking: 100 sec topic presentation`],
          ["Benefited Modules", `• Listening<br/>• Reading<br/>• Speaking<br/>• Writing`],
          ["Aim", `STEP-UP helps you cross the Band-6 skill barrier.`],
          ["After STEP-UP", `• No panic in listening<br/>• Write with clean structure<br/>• Speak smoothly for 100 seconds<br/>• Stable + organized exam mindset`],
          ["Who should take", `• Not sure about Band 6 in each module<br/>• Accuracy problem in Listening/Reading key types<br/>• Idea generate problems in Speaking/Writing`],
          ["Course comes with", `• Live Classes by Band 8+ Instructors<br/>• Mentorship by SHUVO SARKER JOY<br/>• Private Discord Channel<br/>• Scholarship preparation<br/>• Documentation guidelines`],
        ]
      },
      desperate: {
        title: "IELTS DESPERATE — Details",
        tabs: [
          ["Skills Covered", `Listening: P1, P4, MCQ, Maps, Matching<br/>Reading: Passage 1–3 + other types<br/>Writing: Task 1 Graph + Flow chart + Task 2 all types<br/>Speaking: Part 1–3 + evaluations + mock`],
          ["Benefited Modules", `• Reading<br/>• Listening<br/>• Writing<br/>• Speaking`],
          ["Aim", `Learn, test, practice, and fix your IELTS skills accurately with live evaluation.`],
          ["After DESPERATE", `• Understand all IELTS questions clearly<br/>• Know where to focus during exam<br/>• Strong listening strategy<br/>• Clean writing structures<br/>• More controlled speaking<br/>• Exam-ready`],
          ["Who should take", `• IELTS test in 1–2 months<br/>• Can't achieve desired score<br/>• Want final push for next 28 sessions`],
          ["Course comes with", `• Live Classes by Band 8+ Instructors<br/>• Mentorship by SHUVO SARKER JOY<br/>• Private Discord Channel<br/>• Secret suggestions 1 on 1<br/>• Ambassador application`],
        ]
      }
    };

    // ===== Helpers =====
    const $ = (q, p=document) => p.querySelector(q);
    const $$ = (q, p=document) => Array.from(p.querySelectorAll(q));

    const backdrop = $("#backdrop");

    const sheets = {
      video: $("#videoSheet"),
      details: $("#detailsSheet"),
      routine: $("#routineSheet"),
      pricing: $("#pricingSheet")
    };

    let activeSheet = null;
    let activeCourse = null;

    function showBackdrop(on){
      backdrop.classList.toggle("show", !!on);
    }

    function openSheet(sheetEl){
      activeSheet = sheetEl;
      showBackdrop(true);
      sheetEl.classList.add("show");
      sheetEl.setAttribute("aria-hidden","false");
    }

    function closeAllSheets(){
      // stop video
      $("#videoFrame").src = "";
      Object.values(sheets).forEach(s=>{
        s.classList.remove("show");
        s.setAttribute("aria-hidden","true");
      });
      activeSheet = null;
      showBackdrop(false);
    }

    // Close on backdrop tap
    backdrop.addEventListener("click", closeAllSheets);
    // Close on any [data-close]
    $$("[data-close]").forEach(btn => btn.addEventListener("click", closeAllSheets));
    // ESC
    document.addEventListener("keydown", (e)=>{
      if(e.key === "Escape") closeAllSheets();
    });

    // ===== Video open from course image =====
    $$("[data-open-video]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const title = btn.getAttribute("data-title") || "Video";
        const url = btn.getAttribute("data-video") || "";
        $("#videoTitle").textContent = title;
        // autoplay for iOS: add ?autoplay=1&mute=1 (mute helps autoplay)
        const sep = url.includes("?") ? "&" : "?";
        $("#videoFrame").src = url ? (url + sep + "autoplay=1&mute=1") : "";
        openSheet(sheets.video);
      });
    });

    // ===== Details open (tap-only tabs) =====
    function renderDetails(courseKey){
      const pack = COURSE_DETAILS[courseKey];
      if(!pack) return;
      $("#detailsTitle").textContent = pack.title;

      const tabsWrap = $("#detailsTabs");
      const content = $("#detailsContent");
      tabsWrap.innerHTML = "";
      content.innerHTML = "Select an option.";

      pack.tabs.forEach((t, idx)=>{
        const [label, html] = t;
        const b = document.createElement("button");
        b.type = "button";
        b.textContent = label;
        if(idx === 0) b.classList.add("active");

        b.addEventListener("click", ()=>{
          $$("#detailsTabs button").forEach(x=>x.classList.remove("active"));
          b.classList.add("active");
          content.innerHTML = html;
        });

        tabsWrap.appendChild(b);

        // default show first tab content
        if(idx === 0) content.innerHTML = html;
      });
    }

    $$("[data-details]").forEach(btn=>{
      btn.addEventListener("click", (e)=>{
        const card = e.target.closest(".courseCard");
        const courseKey = card?.getAttribute("data-course");
        activeCourse = courseKey || null;
        renderDetails(courseKey);
        openSheet(sheets.details);
      });
    });

    // ===== Routine open (same routine for all; you can highlight per course later) =====
    $$("[data-routine]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        openSheet(sheets.routine);
      });
    });

    // ===== Admit -> Pricing/Payment sheet =====
    $$("[data-admit]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        openSheet(sheets.pricing);
      });
    });

    // Top pricing button
    $("#openPricingTop").addEventListener("click", ()=> openSheet(sheets.pricing));
  </script>

</body>
</html>